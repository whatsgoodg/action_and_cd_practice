name: Gradle Package

on: 
  push: # push할 때 움직인다.
    branches: ["main"]
  pull_request: # pull_request가 왔을 때 움직인다.
    branches: ["main"] 
jobs:
  build: # vm을 제공해준다. 해당 vm에 레포의 커밋을 다운받는다. 
    runs-on: ubuntu-20.04 # latest 최신 버전을 가져와서 좆됐다.

    steps:  
    - name: 1. CheckOut_Source
      uses: actions/checkout@v3 # action 으로 자동화되어 있음 알아서 다운 받는다.
    - name: 2. Set up JDK 21       
      uses: actions/setup-java@v3 # 그리고 자바를 컴파일하기 위해 자바를 다운 받는다.
      with:
        java-version: '21'
        distribution: 'temurin' # eclipse에서 만든 자바 배포판이다.
    - name: 3. Change Execute Mode
      run: chmod +x ./gradlew

    - name: 4. Build with Gradle
      uses: gradle/gradle-build-action@bd5760595778326ba7f1441bcf7e88b49de61a25 # v2.6.0
      with:
        arguments: build
        
    # # The USERNAME and TOKEN need to correspond to the credentials environment variables used in
    # # the publishing section of your build.gradle
    # - name: Publish to GitHub Packages
    #   uses: gradle/gradle-build-action@bd5760595778326ba7f1441bcf7e88b49de61a25 # v2.6.0
    #   with:
    #     arguments: publish
    #   env:
    #     USERNAME: ${{ github.actor }}
    #     TOKEN: ${{ secrets.GITHUB_TOKEN }}
